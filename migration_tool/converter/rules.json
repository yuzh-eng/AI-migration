{
  "replacements": [
    [
      "\\bNVL\\s*\\(",
      "COALESCE("
    ],
    [
      "\\bSYSDATE\\b",
      "CURRENT_TIMESTAMP()"
    ],
    [
      "\\bSYSTIMESTAMP\\b",
      "CURRENT_TIMESTAMP()"
    ],
    [
      "\\bFROM\\s+DUAL\\b",
      ""
    ]
  ],
  "regex": [
    {
      "pattern": "\\bTRUNC\\s*\\(\\s*([^,\\)]+)\\s*\\)",
      "repl": "DATE_TRUNC('day', \\1)"
    },
    {
      "pattern": "\\bTRUNC\\s*\\(\\s*([^,\\)]+)\\s*,\\s*'?(MONTH|MON)'?\\s*\\)",
      "repl": "DATE_TRUNC('month', \\1)"
    },
    {
      "pattern": "\\bADD_MONTHS\\s*\\(\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)",
      "repl": "DATEADD(month, \\2, \\1)"
    },
    {
      "pattern": "\\bDECODE\\s*\\(\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,\\)]+)\\s*(?:,\\s*([^\\)]+))?\\)",
      "repl": "CASE WHEN \\1=\\2 THEN \\3 ELSE \\4 END"
    },
    {
      "pattern": "\\bNVL2\\s*\\(\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)",
      "repl": "IFF(\\1 IS NOT NULL, \\2, \\3)"
    },
    {
      "pattern": "NVL\\(([^,]+),\\s*([^)]+)\\)",
      "repl": "COALESCE($1, $2)"
    },
    {
      "pattern": "RTRIM\\(XMLCAST\\(XMLAGG\\(XMLELEMENT\\(E,([^)]+)\\) ORDER BY([^)]+)\\) AS XMLTYPE\\)\\.GETCLOBVAL\\(\\), '([^']*)'\\)",
      "repl": "LISTAGG$1$2, '$3') WITHIN GROUP $2"
    },
    {
      "pattern": "(NVL\\()([^,]+),\\s*('(?:[^']|'')*')\\)",
      "repl": "COALESCE($2, $3)"
    },
    {
      "pattern": "(ROUND\\([^,]+,\\s*)'HH'(?=\\))",
      "repl": "\\1'HOUR'"
    },
    {
      "pattern": "TRUNC\\(SYSDATE,\\s*'YEAR'\\)",
      "repl": "DATE_TRUNC('year', CURRENT_DATE)"
    },
    {
      "pattern": "DECODE\\s*\\(\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)(?:\\s*,\\s*([^,]+)\\s*,\\s*([^,]+))*\\s*\\)",
      "repl": "CASE WHEN \\1 = \\2 THEN \\3 ELSE CASE WHEN \\1 = \\4 THEN \\5 ELSE NULL END END"
    },
    {
      "pattern": "(\\bWHERE\\s+e\\.hire_date\\s+BETWEEN\\s+)ADD_MONTHS\\(TRUNC\\(SYSDATE,\\s*'YEAR'\\),\\s*-3\\)(\\s+AND\\s+SYSDATE)",
      "repl": "\\1DATEADD(month, -3, DATE_TRUNC('year', CURRENT_DATE()))\\2 AND CURRENT_DATE()"
    }
  ],
  "warnings": [
    {
      "pattern": "\\bCONNECT\\s+BY\\b",
      "message": "CONNECT BY detected; manual rewrite to WITH RECURSIVE required"
    }
  ]
}